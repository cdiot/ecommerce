{% extends 'base.html.twig' %}

{% block title %}Panier {{ parent() }}
{% endblock %}

{% block body %}

	<section class="container border shadow rounded-3 section pt-5">
		<h1 class="section-title h2">Panier</h1>
		{% if cart|length > 0 %}
			<table class="table mt-3">
				<thead>
					<tr>
						<th scope="col">Produit</th>
						<th scope="col"></th>
						<th scope="col">Quantit√©</th>
						<th scope="col">Prix</th>
						<th scope="col">Total</th>
						<th scope="col"></th>
					</tr>
				</thead>
				<tbody>
					{% set total = null %}
					{% for product in cart %}
						<tr>
							<th scope="row">
								<img src="{{ asset('/uploads/' ~ product.product.illustration) }}" alt="{{ product.product.name}}" height="75px">
							</th>
							<td>{{ product.product.name }}</td>
							<td>
								<a href="{{ path('decrease_to_cart', { 'id': product.product.id }) }}"><img src="{{ asset('build/images/ic-minus.png') }}" height="15px" alt="Enlever un produit"></a>
								x {{ product.quantity }}
								<a href="{{ path('add_to_cart', { 'id': product.product.id }) }}"><img src="{{ asset('build/images/ic-plus.png') }}" height="15px" alt="Ajouter un produit"></a>
							</td>
							<td>{{ price(product.product.price) }}
								&euro;</td>
							<td>{{ price(product.product.price * product.quantity) }}
								&euro;</td>
							<td>
								<a href="{{ path('delete_to_cart', { 'id' : product.product.id}) }}"><img src="{{ asset('build/images/ic-delete.png') }}" height="18px" alt="Supprimer un produit"></a>
							</td>
						</tr>
						{% set total = total + (product.product.price * product.quantity) %}
					{% endfor %}
				</tbody>
			</table>
			<div class="text-right mb-5 d-grid gap-2">
				<b>Nombre de produit : {{ cart|length }}</b><br>
				<b>Prix total TTC : {{ price(total) }}
					&euro;</b><br>
				<a href="#" class="btn btn-success btn-block mt-3">Valider mon panier</a>
			</div>
		{% else %}
			<p>Votre panier est vide.</p>
		{% endif %}
	</section>
	{% include "base/_brand.html.twig" %}
{% endblock %}
